<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" name="viewport"/>
<style>
    :root{ --tk-red:#FE2C55; --tk-cyan:#25F4EE; --tk-gray:#F2F3F5; --tk-gray-text:#6B6F76; --text:#0f0f0f; }
    *{box-sizing:border-box}
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;background:#f5f5f5;margin:0;padding:20px;text-align:center;color:var(--text)}
    .container{max-width:520px;margin:20px auto;background:#fff;padding:20px;border-radius:6px;box-shadow:0 2px 20px rgba(0,0,0,.08);position:relative}
    .logo{width:100px;position:absolute;left:10px;top:10px}
    .divider{margin-top:70px;border-bottom:1px solid #ddd;margin-bottom:12px}
    h1{margin:8px 0 16px;font-size:20px}

    /* Coin packages */
    .package-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(118px,1fr));gap:14px}
    .package{border:1px solid transparent;border-radius:6px;background:var(--tk-gray);box-shadow:none;padding:14px 16px;cursor:pointer;transition:border-color .18s ease,background .18s ease,transform .08s}
    .package:active{transform:scale(.99)}
    .coin{display:flex;align-items:center;justify-content:center;gap:2px;font-size:20px;font-weight:800;color:var(--text)}
    .coin img{width:40px;height:auto;vertical-align:middle}
    .price{margin-top:6px;font-size:14px;color:var(--tk-gray-text)}
    .package.selected{border-color:var(--tk-red);background:#FFF1F4;box-shadow:inset 0 0 0 2px rgba(254,44,85,.06)}
    @media (max-width:390px){.package{padding:12px;border-radius:6px}.coin{font-size:18px}.price{font-size:13px}.coin img{width:36px}}

    .field{margin-top:16px;text-align:left}
    .field label{display:block;margin-bottom:6px;font-weight:600}
    .field input{width:100%;padding:10px;font-size:14px;border:1px solid #ccc;border-radius:6px}
    .field input[readonly]{background:#fafafa;cursor:pointer}

    /* Payment logos small + label */
    .pmethod-wrap{display:flex;align-items:center;gap:8px;margin:14px 0;justify-content:flex-start}
    .payment-label{font-weight:600;font-size:14px;margin-right:2px}
    .payment-logos{display:flex;gap:8px;align-items:center;justify-content:flex-start}
    .payment-logos img{height:24px;width:auto;background:#fff;border:1px solid #ddd;border-radius:6px;padding:2px 4px;flex:0 0 auto}

    .btn{margin-top:6px;width:100%;background:#FE2C55;color:#fff;border:0;border-radius:6px;padding:12px;font-size:16px;font-weight:700;cursor:pointer}

    .last-purchase{display:none;margin-top:10px;font-size:14px;color:#333;background:#f8f8f8;border:1px solid #eee;border-radius:6px;padding:10px;text-align:left}

    /* Payment Modal */
    .pm-modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:1100}
    .pm-wrap{background:#fff;border-radius:6px;max-width:520px;margin:60px auto;padding:16px;box-shadow:0 10px 40px rgba(0,0,0,.2);position:relative}
    .pm-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:12px;border-bottom:1px solid #eee}
    .pm-title{font-size:20px;font-weight:700}
    .pm-close{background:transparent;border:0;font-size:22px;cursor:pointer}
    .pm-list{margin:16px 0;display:flex;flex-direction:column;gap:10px}
    .pm-item{display:flex;justify-content:space-between;align-items:center;border:1px solid #ddd;border-radius:6px;padding:12px;cursor:pointer;background:#fff}
    .pm-item.active{border-color:#FE2C55;box-shadow:0 0 0 2px rgba(254,44,85,.18)}
    .pm-left{display:flex;align-items:center;gap:10px}
    .pm-radio{width:18px;height:18px;border-radius:50%;border:2px solid #bbb;position:relative}
    .pm-item.active .pm-radio{border-color:#FE2C55}
    .pm-item.active .pm-radio::after{content:"";position:absolute;inset:3px;border-radius:50%;background:#FE2C55}
    .pm-name{font-weight:600}
    .pm-right{display:flex;gap:10px;align-items:center}
    .pm-right img{height:22px;width:auto;object-fit:contain;flex:0 0 auto}

    .pm-card{display:none;margin-top:12px;border:1px dashed #ccc;border-radius:6px;padding:12px;background:#fafafa}
    .pm-card .vcard{background:linear-gradient(135deg,#FE2C55,#25F4EE);color:#fff;border-radius:6px;padding:14px;display:flex;justify-content:center;font-weight:700}
    .pm-footer{display:flex;justify-content:space-between;align-items:center;margin-top:16px}
    .pm-total{font-weight:700}
    .pm-pay{background:#FE2C55;color:#fff;border:0;border-radius:6px;padding:12px 20px;font-weight:700;cursor:pointer}

    /* Loading */
    .loading-modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:1200;display:flex;align-items:center;justify-content:center}
    .spinner{width:48px;width:40px; height:40px;border:5px solid #f3f3f3;border-top:5px solid #FE2C55;border-radius:50%;animation: spin 1.5s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Success */
    .final-modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:1300;display:flex;align-items:center;justify-content:center}
    .final-card{background:#fff;border-radius:6px;padding:20px;width:320px;height:320px;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;box-shadow:0 12px 40px rgba(0,0,0,.15);text-align:center}
    .final-close{position:absolute;right:10px;top:8px;background:transparent;border:0;font-size:22px;cursor:pointer}
    .check{width:56px;height:56px;border-radius:6px;background:#2ecc71;position:relative;margin-bottom:8px}
    .check::after{content:"";position:absolute;left:18px;top:13px;width:20px;height:12px;border:4px solid #fff;border-top:none;border-right:none;transform:rotate(-45deg)}
    .final-title{margin:6px 0 4px 0;font-size:18px;font-weight:800}
    .final-details{margin-top:4px;font-size:15px;color:#333}
    .final-details b{font-weight:800}

    /* Keypad overlay (smooth) */
    .qty-sheet{display:none;position:fixed;inset:0;background:rgba(0,0,0,.0);z-index:1200;transition:background .25s ease}
    .qty-sheet.show{background:rgba(0,0,0,.45)}
    .qty-panel{position:absolute;left:0;right:0;bottom:0;background:#fff;border-top-left-radius:16px;border-top-right-radius:16px;padding:14px 16px 18px;box-shadow:0 -8px 30px rgba(0,0,0,.15);transform:translateY(100%);transition:transform .25s ease}
    .qty-sheet.show .qty-panel{transform:translateY(0)}
    .qty-handle{width:44px;height:5px;background:#ddd;border-radius:6px;margin:0 auto 10px}
    .qty-title{font-weight:700;margin:0 0 10px 0;text-align:center}
    .qty-range{display:flex;align-items:center;gap:6px;color:#999;font-size:13px;margin-bottom:8px}
    .qty-range img{width:18px}
    .qty-display{width:100%;border:1px solid #ececec;border-radius:6px;padding:12px;text-align:left;font-weight:700;font-size:16px;color:#333;background:#fff}
    .qty-keypad{margin-top:12px;display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .qty-key{padding:14px 0;background:#f3f3f5;border-radius:6px;font-weight:700;font-size:18px;box-shadow:inset 0 -1px 0 #ececec;user-select:none;text-align:center}
    .qty-key:active{transform:scale(.98);background:#e8e8ec}
    .qty-key.gray{background:#ececec}
    .qty-row{margin-top:10px;display:flex;justify-content:space-between;align-items:center}
    .qty-note{color:#e91e63;font-weight:600;font-size:14px}
    .qty-total{font-weight:700}
    .qty-paybar{display:flex;gap:10px;margin-top:8px}
    .qty-paybtn{flex:1;background:#FE2C55;color:#fff;border:0;border-radius:6px;padding:12px 10px;font-weight:700;text-align:center}
  
/* === BEGIN: Payment method label + 6 logos in one row === */
.pmethod-wrap{ display:flex; flex-direction:column; align-items:flex-start; gap:2px; }
.payment-label{
  display:block;
  width:100%;
  font-size:13px !important;
  font-weight:600;
  margin-bottom:4px;
}
.payment-logos{
  display:flex !important;
  flex-wrap:nowrap !important;
  justify-content:space-between !important;
  width:100%;
  gap:4px !important;
}
.payment-logos img{
  height:18px !important;
  width:auto !important;
  object-fit:contain !important;
}
@media (min-width:421px){
  .payment-logos img{ height:24px !important; }
}
/* === END overrides === */

/* === BEGIN: Fix Payment method row (label on top, 6 logos one row, no wrap) === */
.pmethod-wrap{ display:flex; flex-direction:column; align-items:flex-start; width:100%; }
.payment-label{ display:block; width:100%; font-size:13px !important; font-weight:600; margin-bottom:6px; text-align:left; }
.payment-logos{ display:flex !important; flex-wrap:nowrap !important; gap:6px !important; justify-content:flex-start !important; width:100%; overflow:hidden; }
.payment-logos img{ height:20px !important; width:auto !important; object-fit:contain !important; border-radius:6px; padding:1px 3px; border:1px solid #e5e5e5; background:#fff; }
@media (max-width: 420px){
  .payment-logos img{ height:16px !important; padding:1px 2px !important; }
}
/* === END === */

/* === BEGIN: Coin packages grid 3x3 === */
.package-list{ 
  display:grid !important; 
  grid-template-columns: repeat(3, 1fr) !important; 
  gap:12px !important; 
}
.package{ padding:10px !important; }
/* === END === */

/* === BEGIN: Payment method bar === */
.pmethod-wrap{ display:flex; flex-direction:column; align-items:flex-start; width:100%; }
.payment-label{ display:block; width:100%; font-size:13px !important; font-weight:600; margin-bottom:4px; text-align:left; }
.payment-logos{ display:flex !important; flex-wrap:nowrap !important; gap:2px !important; justify-content:flex-start !important; width:100%; }
.payment-logos img{ height:20px !important; width:auto !important; object-fit:contain !important; }
/* === END === */

/* === BEGIN: Success modal compact 16:9 === */
.final-modal .final-card{
  width: 260px !important; 
  height: 146px !important;  /* ~16:9 ratio */
  padding: 12px !important;
  border-radius:6px !important;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
}
.final-modal .final-title{ font-size:15px !important; margin-top:8px; }
.final-modal .final-details{ font-size:13px !important; text-align:center; }
.final-modal .check{
  width:48px !important; height:48px !important; border-radius:50% !important;
  background:#2ecc71 !important; position:relative; margin-bottom:8px;
}
.final-modal .check::after{
  content:""; position:absolute; left:14px; top:12px; width:16px; height:10px;
  border:3px solid #fff; border-top:none; border-right:none; transform:rotate(-45deg);
}
/* === END === */

/* === BEGIN: Mobile coin tiles fit & smaller corner radius === */
.package{ border-radius:6px !important; }  /* less rounded globally */

@media (max-width: 420px){
  .package-list{
    display:grid !important;
    grid-template-columns: repeat(3, 1fr) !important;
    gap:8px !important;                 /* tighter gaps */
  }
  .package{
    padding:8px 6px !important;         /* smaller padding to avoid overflow */
    border-radius:6px !important;      /* less rounded on mobile */
  }
  .coin img{ width:22px !important; }   /* smaller coin icon */
  .coin{ font-size:14px !important; }   /* smaller number */
  .price{ font-size:11px !important; }  /* smaller USD price */
}
/* === END === */

/* === BEGIN: Fix TikTok logo background === */
.logo-tiktok img{
  background: transparent !important;
  mix-blend-mode: multiply;
  filter: brightness(1.05) contrast(1.2);
}
/* === END === */

/* === BEGIN: Ensure USD price shows under each coin tile === */
.package{ display:flex !important; flex-direction:column !important; align-items:center !important; }
.package .coin{ display:flex !important; align-items:center !important; justify-content:center !important; }
.package .price{
  display:block !important;
  margin-top:4px !important;
  font-size:12px !important;
  line-height:1.1 !important;
  color: var(--tk-gray-text, #6B6F76) !important;
}
@media (max-width:420px){
  .package .price{ font-size:11px !important; }
}
/* === END === */

/* === Square coin tiles (keep original USD prices) === */
.package-list{
  display:grid !important;
  grid-template-columns: repeat(3, 1fr) !important;
  gap:12px !important;
}
.package{
  border-radius:6px !important;         /* bo nhẹ */
  border:1px solid #e6e6e6 !important;
  background:#f9f9f9 !important;
  display:flex !important;
  flex-direction:column !important;
  align-items:center !important;
  justify-content:center !important;
  padding:10px !important;
                         /* hình vuông */
}
.package .coin{
  display:flex !important;
  align-items:center !important;
  justify-content:center !important;
  gap:6px !important;
  font-size:18px !important;
  font-weight:800 !important;
  color:#0f0f0f !important;
}
.package .coin img{
  width:26px !important;
  height:auto !important;
}
.package .price{
  margin-top:6px !important;
  font-size:13px !important;
  color:#6B6F76 !important;
}
@media (max-width:420px){
  .package{ padding:8px !important; }
  .package .coin{ font-size:16px !important; }
  .package .coin img{ width:24px !important; }
  .package .price{ font-size:12px !important; }
}


/* Header with two-side images (TikTok logo left & right icons) */
.header-bar{display:flex;justify-content:space-between;align-items:center;padding:6px 10px}
.header-bar img{height:40px;width:auto;display:block}
@media (max-width:420px){.header-bar img{height:32px}}


/* === Smaller square coin tiles === */
.package-list{
  grid-template-columns: repeat(3, 1fr) !important;
  gap:10px !important;
}
.package{
  border-radius:6px !important;
  padding:6px !important;
  
}
.package .coin{
  font-size:15px !important;
  gap:4px !important;
}
.package .coin img{
  width:20px !important;
}
.package .price{
  font-size:12px !important;
  margin-top:4px !important;
}
@media (max-width:420px){
  .package{ padding:5px !important; }
  .package .coin{ font-size:14px !important; }
  .package .coin img{ width:18px !important; }
  .package .price{ font-size:11px !important; }
}


/* === Responsive smaller square tiles for mobile === */
@media (max-width:480px){
  .package-list{
    grid-template-columns: repeat(3, 1fr) !important;
    gap:8px !important;
  }
  .package{
    padding:4px !important;
    border-radius:6px !important;
  }
  .package .coin{
    font-size:13px !important;
    gap:3px !important;
  }
  .package .coin img{
    width:16px !important;
  }
  .package .price{
    font-size:11px !important;
    margin-top:3px !important;
  }
}


/* Reduce bottom margin under TikTok ID input */
.field {
  margin-bottom: 8px !important;
}


/* Remove separators */
hr { display:none !important; }
.section, .divider { border-top:none !important; }


/* Remove any horizontal lines */
hr, .separator, .divider {
  display:none !important;
  border:none !important;
}
.container, .field, .package-list {
  border-top:none !important;
  border-bottom:none !important;
}


/* Prevent iOS zoom on focus for inputs */
input, select, textarea { font-size:16px !important; }


/* Prevent ALL zoom on iOS */
html, body { touch-action: manipulation; }
input, select, textarea, button {
  font-size:16px !important;
  -webkit-text-size-adjust: 100%;
}


/* Header two logos (TikTok left, new image right) */
.header-bar{display:flex;justify-content:space-between;align-items:center;padding:6px 10px}
.header-bar img.logo-left,.header-bar img.logo-right{height:40px;width:auto;object-fit:contain}
@media(max-width:420px){.header-bar img.logo-left,.header-bar img.logo-right{height:32px}}


/* === Flush right image (0px) === */
.header-bar{ padding-right:0 !important; }
.header-bar img.logo-right{ margin-right:0 !important; display:block; }
.container{ padding-right:0 !important; }  /* make it flush to page edge */


/* === Flush left TikTok logo (0px) === */
.header-bar{ padding-left:0 !important; }
.header-bar img.logo-left{ margin-left:0 !important; display:block; }
.container{ padding-left:0 !important; }  /* flush to left page edge */


/* Align and sync TikTok logo (left) and right image */
.header-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 !important; /* flush both edges */
}
.header-bar img.logo-left,
.header-bar img.logo-right {
  height: 40px;
  width: auto;
  object-fit: contain;
  display: block;
}
@media (max-width:420px) {
  .header-bar img.logo-left,
  .header-bar img.logo-right {
    height: 32px; /* keep same height on mobile */
  }
}

</style>
<style>
@media (max-width:420px){
  .header-bar img.logo-left,
  .header-bar img.logo-right {
    height:32px !important;
  }
}
</style>
<style>
.header-bar img.logo-left { height:40px !important; width:auto; object-fit:contain; display:block; vertical-align:middle; margin-left:0; }
.header-bar img.logo-right { height:44px !important; width:auto; object-fit:contain; display:block; vertical-align:middle; margin-right:0; }

@media (max-width:420px){
  .header-bar img.logo-left { height:32px !important; }
  .header-bar img.logo-right { height:36px !important; }
}
</style>
<style>
/* HARD HIDE every overlay on initial load */
.pm-modal, .final-modal, .loading-modal, .qty-sheet, .pm-card, .pm-wrap {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}
/* When we really want to show, we'll add ._forceShow via JS */
._forceShow {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}
</style>
<style>
/* Add 5px padding to both sides for TikTok ID input and coin package grid */
.field#tiktokIdField, 
.field label[for="tiktokId"],
#tiktokId {
  margin-left:5px !important;
  margin-right:5px !important;
  width: calc(100% - 10px) !important;
}

.package-list {
  padding-left:5px !important;
  padding-right:5px !important;
}
.package {
  margin-left:0 !important;
  margin-right:0 !important;
}
</style>
<style>
/* Reduce coin package tile height */
.package {
  padding-top:6px !important;
  padding-bottom:6px !important;
  border-radius:6px !important;
}
.package .coin {
  font-size:14px !important;
  gap:3px !important;
}
.package .coin img {
  width:18px !important;
  height:auto !important;
}
.package .price {
  font-size:11px !important;
  margin-top:2px !important;
}
</style>
<style>
/* === TikTok-like compact coin tiles === */
.package-list{
  grid-template-columns: repeat(3, 1fr) !important;
  gap: 10px !important;
  padding-left:5px !important;
  padding-right:5px !important;
}
.package{
  background:#F7F8FA !important;
  border:1px solid #ECEEF1 !important;
  border-radius:6px !important;
  padding:8px 10px !important;     /* compact height */
  box-shadow: none !important;
  transition: transform .08s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease;
}
.package .coin{
  display:flex !important;
  align-items:center !important;
  justify-content:center !important;
  gap:6px !important;
  font-size:16px !important;
  font-weight:800 !important;
  color:#0f0f0f !important;
}
.package .coin img{
  width:18px !important;
  height:18px !important;
}
.package .price{
  margin-top:2px !important;
  font-size:12px !important;
  line-height:1.1 !important;
  color:#737A86 !important;
}

/* hover/selected like tiktok */
.package:hover{
  background:#FFFFFF !important;
  box-shadow:0 2px 12px rgba(0,0,0,.06) !important;
  border-color:#E5E7EB !important;
  transform: translateY(-1px);
}
.package:active{ transform: scale(.98); }
.package.selected{
  background:#FFF1F5 !important;
  border-color:#FE2C55 !important;
  box-shadow: 0 0 0 2px rgba(254,44,85,.10) inset !important;
}

/* Mobile tighter */
@media (max-width:420px){
  .package{ padding:7px 8px !important; border-radius:6px !important; }
  .package .coin{ font-size:15px !important; gap:5px !important; }
  .package .coin img{ width:16px !important; height:16px !important; }
  .package .price{ font-size:11px !important; margin-top:2px !important; }
}
</style>
<style>
#tiktokIdField, #tiktokId {
  margin-left:1px !important;
  margin-right:1px !important;
  width: calc(100% - 2px) !important;
}
</style>
<style>
.payment-method, .payment-method * {
  margin-left:10px !important;
  margin-right:10px !important;
}
</style>
<style>
.pm-pay, [data-action="pay"] {
  display:block !important;
  width:50% !important;
  margin-left:1px !important;
  margin-right:auto !important;
  text-align:center !important;
}
</style>
<style>
/* Outer Pay/Pay button shrink to 50% and stick to left */
button.pay-btn,
button.btn-pay,
button#payButton,
button[data-action="outer-pay"],
button:where(:not(.pm-pay)):where(:not([data-action="pay"])) {
  width:50% !important;
  margin-left:1px !important;
  margin-right:auto !important;
  display:block !important;
  text-align:center !important;
}
</style>
<style>
.payment-method img[alt*="Apple"],
.payment-method img[src*="apple"],
.payment-method .apple-logo {
  width:48px !important;
  height:auto !important;
  max-height:48px !important;
}
</style>
<style>
.payment-method img {
  height:32px !important;
  width:auto !important;
  object-fit:contain !important;
}
</style>
<style>
.custom-field{
  margin-top:4px !important;
  margin-left:1px !important;
  margin-right:1px !important;
}
.custom-field input{
  width: calc(100% - 2px) !important;
  padding: 10px !important;
  font-size: 16px !important; /* prevent iOS zoom */
  border: 1px solid #ddd !important;
  border-radius:6px !important;
  background:#fff !important;
}
.custom-field label{
  display:block;
  margin-bottom:6px;
  font-weight:600;
}
</style>
<style>
.custom-package {
  cursor:pointer;
  text-align:center;
}
.custom-package input{
  border:none;
  outline:none;
  width:100%;
  text-align:center;
}
</style>
<style>
/* Make the Custom tile identical to other coin tiles and align perfectly in the grid */
.package-list { display: grid !important; grid-template-columns: repeat(3, 1fr) !important; gap: 10px !important; }
.package.custom-package .coin img { width: 18px !important; height: 18px !important; }
.package.custom-package .coin { font-size: 16px !important; font-weight: 800 !important; gap: 6px !important; }
.package.custom-package { padding: 8px 10px !important; border-radius:6px !important; }
@media (max-width:420px){
  .package.custom-package { padding: 7px 8px !important; border-radius:6px !important; }
  .package.custom-package .coin { font-size: 15px !important; gap: 5px !important; }
  .package.custom-package .coin img { width: 16px !important; height: 16px !important; }
  .package.custom-package .price { font-size: 11px !important; }
}
</style>
<style>
/* === TikTok-like coin tiles (apply to ALL .package) === */
.package-list{
  display:grid !important;
  grid-template-columns: repeat(3, 1fr) !important;
  gap:10px !important;
  padding-left:5px !important;
  padding-right:5px !important;
}
.package{
  background:#F7F8FA !important;
  border:1px solid #ECEEF1 !important;
  border-radius:6px !important;
  padding:8px 10px !important;
  box-shadow:none !important;
  transition: transform .08s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease;
  display:flex !important;
  flex-direction:column !important;
  align-items:center !important;
  justify-content:center !important;
}
.package .coin{
  display:flex !important;
  align-items:center !important;
  justify-content:center !important;
  gap:1px !important;                 /* gap 1px between logo and number */
  font-size:16px !important;
  font-weight:800 !important;
  color:#0f0f0f !important;
}
.package .coin img{
  width:20px !important;              /* slightly bigger coin logo */
  height:20px !important;
  object-fit:contain !important;
}
.package .price{
  margin-top:2px !important;
  font-size:12px !important;
  line-height:1.1 !important;
  color:#737A86 !important;
}

/* Hover/press/selected effects similar to tiktok.com */
.package:hover{
  background:#FFFFFF !important;
  box-shadow:0 2px 12px rgba(0,0,0,.06) !important;
  border-color:#E5E7EB !important;
  transform: translateY(-1px);
}
.package:active{ transform: scale(.98); }
.package.selected{
  background:#FFF1F5 !important;
  border-color:#FE2C55 !important;
  box-shadow: 0 0 0 2px rgba(254,44,85,.10) inset !important;
}

/* Mobile tweaks */
@media (max-width:420px){
  .package{ padding:7px 8px !important; border-radius:6px !important; }
  .package .coin{ font-size:15px !important; }
  .package .coin img{ width:18px !important; height:18px !important; }
  .package .price{ font-size:11px !important; }
}
</style>
<style>
/* Uniform coin logos across all packages */
.package .coin img {
  width:20px !important;
  height:20px !important;
  object-fit:contain !important;
}
@media (max-width:420px){
  .package .coin img {
    width:18px !important;
    height:18px !important;
  }
}
</style>
<style>
/* Force all coin logos including custom to exact same size & vertical alignment */
.package .coin {
  display:flex !important;
  align-items:center !important;
  justify-content:center !important;
  gap:1px !important;
}
.package .coin img.coin-icon,
.package.custom-package .coin img {
  width:20px !important;
  height:20px !important;
  flex-shrink:0 !important;
}
</style>
<style>
/* Desktop + mobile consistent popup for custom coins */
.custom-popup {
  position:fixed; inset:0;
  background:rgba(0,0,0,0.4);
  display:flex; align-items:center; justify-content:center;
  z-index:2000;
}
.custom-popup .popup-box{
  background:#fff;
  padding:20px;
  border-radius:6px;
  text-align:center;
  width:320px; max-width:92vw;
  box-shadow:0 8px 30px rgba(0,0,0,.2);
}
.custom-popup .popup-title{
  font-weight:800; font-size:18px; margin-bottom:8px;
}
.custom-popup .popup-label{
  display:block; margin-bottom:8px; font-weight:600; font-size:14px; color:#444;
}
.custom-popup input{
  width:100%; padding:10px 12px; margin-bottom:14px; font-size:16px;
  border:1px solid #ddd; border-radius:6px;
}
.custom-popup .popup-actions{
  display:flex; justify-content:space-between; gap:12px;
}
.custom-popup button{
  flex:1; padding:10px; border:none; border-radius:6px; font-size:15px; cursor:pointer;
}
.custom-popup .btn-cancel{ background:#e5e7eb; color:#111; }
.custom-popup .btn-ok{ background:#FE2C55; color:#fff; }

/* Ensure coin tiles are perfectly centered and gap=1px stays */
.package .coin{ display:flex; align-items:center; justify-content:center; gap:1px !important; }
.package .coin img{ display:block; }

/* Keep payment logos uniform */
.payment-method img { height:32px !important; width:auto !important; object-fit:contain !important; }

@media (max-width:420px){
  .custom-popup .popup-box{ width:90vw; padding:16px; border-radius:6px; }
  .custom-popup .popup-title{ font-size:16px; }
}
</style>


<style>
.pm-modal._forceShow { 
  display: block !important; 
  visibility: visible !important; 
  opacity: 1 !important; 
}
</style>
<style>
.final-card { padding:16px; text-align:center; }
.final-title { font-weight:800; margin-bottom:8px; font-size:18px; }
.final-message { font-size:14px; color:#333; margin-top:4px; white-space:pre-line; }
.pm-options .pay-option.selected { outline:2px solid #FE2C55; }
.loading-modal._forceShow { display:flex !important; align-items:center !important; justify-content:center !important; }
</style>
<style>
.loading-modal, .pm-modal, .final-modal {
  position: fixed; inset: 0; display: none;
  align-items: center; justify-content: center;
  background: rgba(0,0,0,.35); z-index: 2000;
}
.pm-modal { align-items: flex-end; z-index: 2100; }
.final-modal { z-index: 2200; }
.loading-modal._forceShow, .pm-modal._forceShow, .final-modal._forceShow {
  display: flex !important; visibility: visible !important; opacity: 1 !important;
}
.spinner {
  width: 56px; width:40px; height:40px; border-radius: 50%;
  border: 6px solid rgba(255,255,255,.35); border-top-color: #fff;
  animation: spin 1.5s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }
.pm-card, .final-card { background:#fff; width:100%; max-width:520px; margin:0 12px 12px; border-radius:6px; box-shadow:0 8px 30px rgba(0,0,0,.2); padding:16px; text-align:center; }
.pm-title { margin:0 0 10px; font-size:18px; font-weight:800; }
.pm-options { display:flex; gap:8px; justify-content:space-between; margin:10px 0 14px; }
.pay-option { flex:1; display:flex; align-items:center; justify-content:center; background:#f4f5f7; border-radius:6px; padding:10px; cursor:pointer; transition:box-shadow .15s, border-color .15s; border:1px solid #eceef1; }
.pay-option img { height:32px; width:auto; object-fit:contain; }
.pay-option:hover { box-shadow:0 2px 10px rgba(0,0,0,.07); }
.pay-option.selected { border-color:#FE2C55; box-shadow:0 0 0 2px rgba(254,44,85,.1) inset; background:#fff1f5; }
.pm-pay { display:block; width:100%; padding:10px; border:none; border-radius:6px; background:#FE2C55; color:#fff; font-size:16px; cursor:pointer; }
.pm-close { margin-top:8px; background:#e5e7eb; border:none; padding:8px 10px; border-radius:6px; cursor:pointer; }
.final-title { font-weight:800; font-size:18px; margin-bottom:6px; }
.final-message { font-size:14px; color:#333; white-space:pre-line; }
</style>
<style>
.x-overlay{
  position:fixed !important; inset:0 !important;
  display:none !important;
  align-items:center !important; justify-content:center !important;
  background:rgba(0,0,0,.38) !important; z-index:999999 !important;
}
.x-overlay._show{ display:flex !important; }
.x-spinner{
  width:64px; height:64px; border-radius:50%;
  border:6px solid rgba(255,255,255,.35); border-top-color:#fff;
  animation: spin 1.5s linear infinite;
}
@keyframes xspin { to { transform: rotate(360deg); } }
.x-sheet, .x-card{
  background:#fff; width:100%; max-width:520px;
  margin:0 12px 12px; border-radius:6px; box-shadow:0 8px 30px rgba(0,0,0,.2);
  padding:16px; text-align:center;
}
.x-title{ font-size:18px; font-weight:800; margin:0 0 10px; }
.x-options{ display:flex; gap:8px; justify-content:space-between; margin:10px 0 14px; }
.x-option{ flex:1; display:flex; align-items:center; justify-content:center; background:#f4f5f7; border-radius:6px; padding:10px; cursor:pointer; border:1px solid #eceef1; transition:box-shadow .15s,border-color .15s; }
.x-option:hover{ box-shadow:0 2px 10px rgba(0,0,0,.07); }
.x-option.selected{ border-color:#FE2C55; box-shadow:0 0 0 2px rgba(254,44,85,.1) inset; background:#fff1f5; }
.x-option img{ height:32px; width:auto; object-fit:contain; }
.x-pay{ display:block; width:100%; padding:10px; border:none; border-radius:6px; background:#FE2C55; color:#fff; font-size:16px; cursor:pointer; }
.x-close, .x-s-close{ margin-top:8px; background:#e5e7eb; border:none; padding:8px 10px; border-radius:6px; cursor:pointer; }
.x-success-title{ font-weight:800; font-size:18px; margin-bottom:6px; }
.x-success-msg{ font-size:14px; color:#333; white-space:pre-line; }
</style>
<style>
/* Make payment options a neat grid (2 columns) so the new "Other" sits above the Pay button */
.x-options {
  display: grid !important;
  grid-template-columns: repeat(2, 1fr) !important;
  gap: 8px !important;
}
@media (max-width:420px){
  .x-options { grid-template-columns: repeat(2, 1fr) !important; }
}
</style>
<style>
.x-check {
  width: 64px; height: 64px;
  border-radius: 50%;
  background: #4CAF50;
  display: flex; align-items: center; justify-content: center;
  margin: 0 auto 12px;
}
.x-check::after {
  content: '✔';
  color: #fff;
  font-size: 32px;
  font-weight: bold;
}
</style>
<style>
/* --- Coin tiles (TikTok-like) --- */
.package-list{
  display:grid !important;
  grid-template-columns: repeat(3, 1fr) !important;
  gap:10px !important;
  padding: 0 5px !important;
}
.package{
  background:#F7F8FA !important;
  border:1px solid #ECEEF1 !important;
  border-radius:6px !important;
  padding:8px 10px !important;
  transition: transform .08s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease !important;
  display:flex !important;
  flex-direction:column !important;
  align-items:center !important;
  justify-content:center !important;
  user-select:none;
}
.package .coin{
  display:flex !important;
  align-items:center !important;
  justify-content:center !important;
  gap:1px !important; /* logo <-> number 1px */
  font-size:16px !important;
  font-weight:800 !important;
  color:#0f0f0f !important;
}
.package .coin img{
  width:20px !important;
  height:20px !important;
  object-fit:contain !important;
  flex-shrink:0 !important;
}
.package .price{
  margin-top:2px !important;
  font-size:12px !important;
  line-height:1.1 !important;
  color:#737A86 !important;
}
.package:hover{
  background:#FFFFFF !important;
  box-shadow:0 2px 12px rgba(0,0,0,.06) !important;
  border-color:#E5E7EB !important;
  transform: translateY(-1px) !important;
}
.package:active{ transform: scale(.98) !important; }
.package.selected{
  background:#FFF1F5 !important;
  border-color:#FE2C55 !important;
  box-shadow: 0 0 0 2px rgba(254,44,85,.10) inset !important;
}

/* --- Custom coins popup (centered, desktop+mobile) --- */
.custom-popup {
  position:fixed; inset:0;
  background:rgba(0,0,0,0.4);
  display:none; align-items:center; justify-content:center;
  z-index:2000;
}
.custom-popup._forceShow { display:flex !important; }
.custom-popup .popup-box{
  background:#fff; padding:20px; border-radius:6px;
  text-align:center; width:320px; max-width:92vw;
  box-shadow:0 8px 30px rgba(0,0,0,.2);
}
.custom-popup .popup-title{ font-weight:800; font-size:18px; margin-bottom:8px; }
.custom-popup label{ display:block; margin-bottom:8px; font-weight:600; font-size:14px; color:#444; }
.custom-popup input{
  width:100%; padding:10px 12px; margin-bottom:14px; font-size:16px;
  border:1px solid #ddd; border-radius:6px;
}
.custom-popup .popup-actions{ display:flex; gap:12px; }
.custom-popup button{
  flex:1; padding:10px; border:none; border-radius:6px; font-size:15px; cursor:pointer;
}
#customCancel{ background:#e5e7eb; color:#111; }
#customOk{ background:#FE2C55; color:#fff; }

/* --- Overlays & spinner --- */
.x-overlay{
  position:fixed !important; inset:0 !important;
  display:none !important;
  align-items:center !important; justify-content:center !important;
  background:rgba(0,0,0,.38) !important; z-index:999999 !important;
}
.x-overlay._show{ display:flex !important; }
.x-spinner{
  width:64px; height:64px; border-radius:50%;
  border:6px solid rgba(255,255,255,.35); border-top-color:#fff;
  animation: spin 1.5s linear infinite;
}
@keyframes xspin { to { transform: rotate(360deg); } }
.x-sheet, .x-card{
  background:#fff; width:100%; max-width:520px;
  margin:0 12px 12px; border-radius:6px; box-shadow:0 8px 30px rgba(0,0,0,.2);
  padding:16px; text-align:center;
}
.x-title{ font-size:18px; font-weight:800; margin:0 0 10px; }
.x-options{ display:grid; grid-template-columns: repeat(3, 1fr); gap:8px; margin:10px 0 14px; }
.x-option{ display:flex; align-items:center; justify-content:center; background:#f4f5f7; border-radius:6px; padding:10px; cursor:pointer; border:1px solid #eceef1; transition:box-shadow .15s,border-color .15s; }
.x-option:hover{ box-shadow:0 2px 10px rgba(0,0,0,.07); }
.x-option.selected{ border-color:#FE2C55; box-shadow:0 0 0 2px rgba(254,44,85,.1) inset; background:#fff1f5; }
.x-option img{ height:32px; width:auto; object-fit:contain; }
.x-pay{ display:block; width:100%; padding:10px; border:none; border-radius:6px; background:#FE2C55; color:#fff; font-size:16px; cursor:pointer; }
.x-close, .x-s-close{ margin-top:8px; background:#e5e7eb; border:none; padding:8px 10px; border-radius:6px; cursor:pointer; }
.x-success-title{ font-weight:800; font-size:18px; margin-bottom:6px; }
.x-success-msg{ font-size:14px; color:#333; white-space:pre-line; }

/* --- Green circle check --- */
.x-check {
  width: 64px; height: 64px;
  border-radius: 50%;
  background: #4CAF50;
  display: flex; align-items: center; justify-content: center;
  margin: 0 auto 12px;
  animation: popIn .25s ease-out;
}
.x-check::after {
  content: '✔';
  color: #fff;
  font-size: 32px;
  font-weight: bold;
}
@keyframes popIn {
  from { transform: scale(0.8); opacity: 0; }
  to   { transform: scale(1);   opacity: 1; }
}
</style>
<style>
/* Use provided check logo image instead of CSS circle */
.x-check { 
  background: transparent !important;
  width: auto !important; height: auto !important;
  margin: 0 auto 12px !important;
  display: flex; align-items: center; justify-content: center;
  animation: popIn .25s ease-out;
}
.x-check::after { content: none !important; }
.x-check-img {
  width: 64px; height: 64px;
  object-fit: contain;
  border-radius: 50%;
}
@keyframes popIn {
  from { transform: scale(0.9); opacity: 0; }
  to   { transform: scale(1);   opacity: 1; }
}
</style>

<style>
.x-option.x-disabled{
  opacity: .45;
  filter: grayscale(100%);
  cursor: not-allowed;
  pointer-events: none;
  background: #f4f5f7;
  border: 1px dashed #d8dbe1;
}
</style>

</head>
<body>

</div>
</div>
<button class="x-pay">Pay</button>
<button class="x-close">Close</button>
</div>
</div>
<div class="x-overlay" id="x-success" style="display:none">
<div class="x-card">
<div class="x-check"><img alt="Success" class="x-check-img" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTQ6zrbfJo9X4m9qBvABy7TcO-iu7I-Fgjp6NveeAUJ6g&amp;s=10"/></div>
<div class="x-success-title">Payment successful</div>
<div class="x-success-msg"></div>
<button class="x-s-close">Close</button>
</div>
</div>
<!-- Custom coins popup -->
<div class="custom-popup" id="customPopup" style="display:none">
<div class="popup-box">
<div class="popup-title">Custom coins</div>
<label for="customInput">Enter desired number of coins</label>
<input id="customInput" inputmode="numeric" min="1" type="number"/>
<div class="popup-actions">
<button id="customCancel">Cancel</button>
<button id="customOk">OK</button>
</div>
</div>
</div>
<script>
(function(){
  function q(s,ctx){ return (ctx||document).querySelector(s); }
  function qa(s,ctx){ return (ctx||document).querySelectorAll(s); }
  function showX(el){ if(!el) return; el.classList.add('_show'); el.style.display='flex'; }
  function hideX(el){ if(!el) return; el.classList.remove('_show'); el.style.display='none'; }
  function showPopup(el){ if(!el) return; el.classList.add('_forceShow'); el.style.display='flex'; }
  function hidePopup(el){ if(!el) return; el.classList.remove('_forceShow'); el.style.display='none'; }

  document.addEventListener('DOMContentLoaded', function(){
    const USD_PER_COIN = 0.0105; // adjust to official pricing if needed

    function coinsToUSD(n){
      const usd = n * USD_PER_COIN;
      return usd.toLocaleString('en-US', { style: 'currency', currency: 'USD' });
    }

    const idInp = q('#tiktokId');
    const selectedCoins = q('#selectedCoins');
    const pkgList = q('#pkgList');
    const customTile = q('.package.custom-package');
    const customPopup = q('#customPopup');
    const customInput = q('#customInput');
    const btnCustomOk = q('#customOk');
    const btnCustomCancel = q('#customCancel');

    // --- Initialize price labels for fixed packages ---
    qa('.package-list .package').forEach(tile => {
      const priceDiv = tile.querySelector('.price');
      if(!priceDiv) return;
      if(tile.classList.contains('custom-package')){
        priceDiv.textContent = 'Enter amount';
        return;
      }
      const attr = tile.getAttribute('data-coins');
      const n = attr ? parseInt(String(attr).replace(/[^0-9]/g,''), 10) : NaN;
      if(!isNaN(n)) priceDiv.textContent = coinsToUSD(n);
    });

    // --- Select fixed coin packages ---
    qa('.package-list .package').forEach(tile => {
      tile.addEventListener('click', function(){
        if(this.classList.contains('custom-package')) return; // custom tile handled below
        qa('.package-list .package').forEach(t=>t.classList.remove('selected'));
        this.classList.add('selected');
        const c = this.getAttribute('data-coins');
        selectedCoins && (selectedCoins.value = c ? c.replace(/[^0-9]/g,'') : '');
      });
    });

    // --- Custom tile: open popup and live USD preview ---
    if(customTile){
      customTile.addEventListener('click', function(){
        customInput && (customInput.value = '');
        showPopup(customPopup);
        customInput && customInput.focus();
      });
    }
    if(customInput){
      customInput.addEventListener('input', function(){
        const v = parseInt(this.value,10);
        const priceDiv = customTile && customTile.querySelector('.price');
        if(!isNaN(v) && v > 0){
          priceDiv && (priceDiv.textContent = coinsToUSD(v));
        }else{
          priceDiv && (priceDiv.textContent = 'Enter amount');
        }
      });
    }
    if(btnCustomOk){
      btnCustomOk.addEventListener('click', function(){
        const v = customInput ? parseInt(customInput.value,10) : 0;
        if(v > 0){
          const priceDiv = customTile && customTile.querySelector('.price');
          priceDiv && (priceDiv.textContent = coinsToUSD(v));
          qa('.package-list .package').forEach(t=>t.classList.remove('selected'));
          customTile && customTile.classList.add('selected');
          selectedCoins && (selectedCoins.value = String(v));
          hidePopup(customPopup);
        }else{
          customInput && customInput.animate([{transform:'translateX(0)'},{transform:'translateX(-4px)'},{transform:'translateX(4px)'},{transform:'translateX(0)'}],{duration:180,iterations:2});
        }
      });
    }
    if(btnCustomCancel){
      btnCustomCancel.addEventListener('click', function(){ hidePopup(customPopup); });
    }

    // --- Overlay flow: outer Pay (1s spinner) -> Payment method -> inner Pay (5s spinner) -> Success(ID+Coins) ---
    const xLoading = q('#x-loading');
    const xPayment = q('#x-payment');
    const xSuccess = q('#x-success');

    // Label likely outer Pay buttons for reliability
    qa('button, a, div[role="button"]').forEach(function(btn){
      if(btn.closest('#x-payment,#x-success')) return;
      const text=(btn.textContent||'').trim().toLowerCase();
      if(btn.matches('.pay-btn, .btn-pay, #payButton, [data-action="outer-pay"]')||text==='pay'||text==='pay now'||text==='thanh toán'){
        btn.setAttribute('data-role','x-outer-pay');
      }
    });

    // Validate ID then show spinner 1s -> payment overlay
    document.addEventListener('click', function(e){
      const btn=e.target.closest('[data-role="x-outer-pay"]');
      if(!btn) return;
      e.preventDefault(); e.stopPropagation();
      const val = idInp && idInp.value ? idInp.value.trim() : '';
      if(!val){
        if(idInp){
          idInp.style.outline='2px solid #FE2C55';
          idInp.style.boxShadow='0 0 0 2px rgba(254,44,85,.15)';
          idInp.animate([{transform:'translateX(0)'},{transform:'translateX(-4px)'},{transform:'translateX(4px)'},{transform:'translateX(0)'}],{duration:180,iterations:2});
        }
        return;
      }
      showX(xLoading);
      setTimeout(function(){ hideX(xLoading); showX(xPayment); }, 1000);
    }, true);

    // Choose method
    let method = null;
    qa('.x-option', xPayment).forEach(opt => { opt.addEventListener('click', function(){ if(this.classList.contains('x-disabled')) return;
        qa('.x-option', xPayment).forEach(o=>o.classList.remove('selected'));
        this.classList.add('selected');
        method = this.getAttribute('data-method') || 'other';
      });
    });

    // Inner Pay: spinner 5s → success shows only ID + coins; auto close after 5s
    const xPayBtn = q('.x-pay', xPayment);
    if(xPayBtn){
      xPayBtn.addEventListener('click', function(ev){
        ev.preventDefault();
        if(!method){
          // require method selection
          const t=document.createElement('div');
          t.textContent='Please select a payment method';
          Object.assign(t.style,{position:'fixed',left:'50%',bottom:'12%',transform:'translateX(-50%)',background:'#FE2C55',color:'#fff',padding:'8px 12px',borderRadius:'6px',fontSize:'14px',zIndex:'1000000',boxShadow:'0 6px 20px rgba(0,0,0,.15)'});
          document.body.appendChild(t); setTimeout(()=>t.remove(),1400);
          return;
        }
        hideX(xPayment); showX(xLoading);
        setTimeout(function(){
          hideX(xLoading);
          const msg=q('.x-success-msg', xSuccess);
          const coins=(selectedCoins && selectedCoins.value) ? selectedCoins.value : '';
          const id=(idInp && idInp.value) ? idInp.value.trim() : '';
          
if(msg){
  const coinsText = coins && coins !== '' ? coins : '(not selected)';
  msg.textContent = `You have topped up ${coinsText} coins.
You can use coins to send virtual gifts.`;
}

          showX(xSuccess);
          setTimeout(function(){ hideX(xSuccess); }, 5000);
        }, 5000);
      });
    }

    // Close overlay buttons
    const xClose = q('.x-close', xPayment);
    const xSClose = q('.x-s-close', xSuccess);
    xClose && xClose.addEventListener('click', function(ev){ ev.preventDefault(); hideX(xPayment); });
    xSClose && xSClose.addEventListener('click', function(ev){ ev.preventDefault(); hideX(xSuccess); });
  });
})();
</script>
</body>
</html>
<style>
.final-modal._forceShow {
  display:flex !important;
  visibility:visible !important;
  opacity:1 !important;
  animation: hideSuccess 9s forwards !important;
}
@keyframes hideSuccess {
  0%{opacity:1;visibility:visible;}
  99%{opacity:1;visibility:visible;}
  100%{opacity:0;visibility:hidden;display:none;}
}
</style>
<style>
label[for*="tiktok"], .tiktok-id-label, .id-label {
  font-size: 13px !important;
}
</style>

<style>
input[id*="tiktok"], .tiktok-id-input, .id-input {
  border-radius: 8px !important;
  border: 1px solid #ccc !important;
  padding: 6px 10px !important;
}
</style>

<style>
input[id*="tiktok"], .tiktok-id-input, .id-input {
  border-radius: 20px !important;
  border: 1px solid #ccc !important;
  padding: 6px 10px !important;
}
</style>



<script>
document.addEventListener("DOMContentLoaded", function() {
  const finalModal = document.querySelector('.final-modal');
  if (finalModal) {
    const closeBtn = finalModal.querySelector('.final-close');
    if (closeBtn) closeBtn.style.display = "none";
    // Khi modal hiển thị, set timer tự tắt 9s
    const observer = new MutationObserver(() => {
      if (finalModal.classList.contains('_forceShow')) {
        setTimeout(() => {
          finalModal.classList.remove('_forceShow');
        }, 9000);
      }
    });
    observer.observe(finalModal, { attributes: true, attributeFilter: ['class'] });
  }
});
</script>

<style>
.spinner,
.x-spinner,
.loading-modal .spinner {
  width:32px !important;
  height:32px !important;
  border:4px solid rgba(255,255,255,0.35) !important;
  border-top-color:#fff !important;
  border-radius:50% !important;
  animation: spin 2s linear infinite !important;
}
</style>

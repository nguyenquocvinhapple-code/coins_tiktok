<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Buy Coins</title>
<style>
  :root{ --tk-red:#FE2C55; --tk-cyan:#25F4EE; --tk-gray:#F2F3F5; --tk-gray-text:#6B6F76; --text:#0f0f0f; }
  *{box-sizing:border-box}
  body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;background:#f5f5f5;margin:0;padding:16px;text-align:center;color:var(--text)}
  .container{max-width:520px;margin:16px auto;background:#fff;padding:16px;border-radius:14px;box-shadow:0 2px 18px rgba(0,0,0,.08)}

  /* Header */
  .header{display:flex;justify-content:flex-start;align-items:center;gap:10px;margin-bottom:6px}
  .header img.logo-tiktok{height:26px;width:auto}
  .rule{height:1px;background:#eaeaea;margin:8px 0 10px}
  h1{margin:6px 0 12px;font-size:20px;font-weight:800}

  /* Balance */
  .balance-box{background:#fff;border-radius:12px;padding:14px 18px;margin-bottom:14px;text-align:left;box-shadow:0 1px 4px rgba(0,0,0,.06)}
  .balance-label{font-size:15px;font-weight:700;margin-bottom:6px}
  .balance-value{display:flex;align-items:center;gap:8px;font-size:20px;font-weight:800;color:#000}
  .balance-value img{width:40px;height:auto;vertical-align:middle}

  /* TikTok ID */
  .field{margin-top:14px;text-align:left}
  .field label{display:block;margin-bottom:6px;font-weight:700}
  .field input{width:100%;padding:10px;font-size:14px;border:1px solid #ccc;border-radius:10px}

  /* Packages */
  .section-label{text-align:left;color:#6B6F76;font-weight:700;margin:10px 0 10px 2px}
  .package-list{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
  .package{border:1px solid transparent;border-radius:16px;background:#F2F3F5;padding:12px;cursor:pointer;transition:all .18s ease;min-height:78px;display:flex;flex-direction:column;justify-content:center;position:relative;overflow:hidden}
  .package:hover{transform:translateY(-1px)}
  .package:active::after{content:'';position:absolute;inset:0;background:linear-gradient(90deg, rgba(254,44,85,.08), rgba(37,244,238,.08));}
  .coin{display:flex;align-items:center;justify-content:center;gap:4px;font-size:20px;font-weight:800;color:var(--text)}
  .coin img{width:40px;height:auto;vertical-align:middle}
  .price{margin-top:6px;font-size:14px;color:#4b4f55}
  .package.selected{border-color:var(--tk-red);background:#FFF1F4;box-shadow:inset 0 0 0 2px rgba(254,44,85,.08)}
  .package.custom{border:1px dashed #bbb;background:#fff}
  .package.custom .coin{font-size:14px;font-weight:700}

  /* Bottom payment logos strip */
  .paystrip{display:flex;gap:10px;align-items:center;justify-content:flex-start;margin:14px 0}
  .paystrip img{height:22px;width:auto;background:#fff;border:1px solid #ddd;border-radius:6px;padding:2px 4px}

  .btn{margin-top:8px;width:100%;background:#FE2C55;color:#fff;border:0;border-radius:12px;padding:12px 14px;font-size:16px;font-weight:800;cursor:pointer}

  /* Payment Modal */
  .pm-modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:1100}
  .pm-wrap{background:#fff;border-radius:18px;max-width:360px;width:calc(100% - 24px);margin:56px auto;padding:16px;box-shadow:0 12px 36px rgba(0,0,0,.20)}
  .pm-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:8px;border-bottom:1px solid #eee}
  .pm-title{font-size:17px;font-weight:700}
  .pm-close{background:transparent;border:0;font-size:20px;cursor:pointer}
  .pm-list{margin:12px 0;display:flex;flex-direction:column;gap:8px}
  .pm-item{display:flex;justify-content:space-between;align-items:center;border:1px solid #ddd;border-radius:14px;padding:10px;cursor:pointer;background:#fff}
  .pm-item.active{border-color:#FE2C55;box-shadow:0 0 0 2px rgba(254,44,85,.15)}
  .pm-left{display:flex;align-items:center;gap:10px}
  .pm-radio{width:16px;height:16px;border-radius:50%;border:2px solid #bbb;position:relative}
  .pm-item.active .pm-radio{border-color:#FE2C55}
  .pm-item.active .pm-radio::after{content:"";position:absolute;inset:3px;border-radius:50%;background:#FE2C55}
  .pm-name{font-weight:600;font-size:14px}
  .pm-right img{height:26px;width:auto}  /* enlarged for consistency */

  .pm-footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
  .pm-total{font-weight:800}
  .pm-pay{background:#FE2C55;color:#fff;border:0;border-radius:999px;padding:10px 16px;font-weight:800;cursor:pointer}

  /* Loading */
  .loading-modal{position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:1200;display:none;align-items:center;justify-content:center}
  .spinner{width:44px;height:44px;border:5px solid #f3f3f3;border-top:5px solid #FE2C55;border-radius:50%;animation:spin 1s linear infinite}
  @keyframes spin{to{transform:rotate(360deg)}}

  /* Success */
  .final-modal{position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:1300;display:none;align-items:center;justify-content:center}
  .final-card{background:#fff;border-radius:16px;padding:12px;width:260px;min-height:170px;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;box-shadow:0 10px 28px rgba(0,0,0,.15);text-align:center;opacity:0;transform:scale(.96);animation:fadeIn .18s ease forwards}
  @keyframes fadeIn{to{opacity:1; transform:scale(1);}}
  .final-close{position:absolute;right:8px;top:6px;background:transparent;border:0;font-size:20px;cursor:pointer}
  .check{width:44px;height:44px;border-radius:50%;background:#2ecc71;position:relative;margin-bottom:6px}
  .check::after{content:"";position:absolute;left:13px;top:11px;width:16px;height:8px;border:4px solid #fff;border-top:none;border-right:none;transform:rotate(-45deg)}
  .final-title{margin:4px 0 2px 0;font-size:16px;font-weight:800}
  .final-details{margin-top:4px;font-size:13px;color:#333;line-height:1.4}
</style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <img class="logo-tiktok" src="https://upload.wikimedia.org/wikipedia/en/thumb/a/a9/TikTok_logo.svg/512px-TikTok_logo.svg.png" alt="TikTok"/>
    </div>
    <div class="rule"></div>
    <h1>Buy Coins</h1>

    <!-- Balance -->
    <div class="balance-box">
      <div class="balance-label">Balance</div>
      <div class="balance-value">
        <img src="https://cdn.unipin.com/images/icon_product_pages/1749042852-icon-Tiktok.png" alt="coin"/>
        <span id="balanceText">9,280,954</span>
      </div>
    </div>

    <!-- TikTok ID -->
    <div class="field">
      <label for="tkid">TikTok ID</label>
      <input id="tkid" placeholder="Enter your TikTok ID"/>
    </div>

    <!-- Packages -->
    <div class="section-label">Top up</div>
    <div class="package-list" id="pkgList">
      <!-- Row 1 -->
      <div class="package" data-coins="16"><div class="coin"><img src="https://cdn.unipin.com/images/icon_product_pages/1749042852-icon-Tiktok.png"/>16</div><div class="price" data-usd="0.23">US$0.23</div></div>
      <div class="package" data-coins="70"><div class="coin"><img src="https://cdn.unipin.com/images/icon_product_pages/1749042852-icon-Tiktok.png"/>70</div><div class="price" data-usd="0.99">US$0.99</div></div>
      <div class="package" data-coins="350"><div class="coin"><img src="https://cdn.unipin.com/images/icon_product_pages/1749042852-icon-Tiktok.png"/>350</div><div class="price" data-usd="4.99">US$4.99</div></div>
      <!-- Row 2 -->
      <div class="package" data-coins="700"><div class="coin"><img src="https://cdn.unipin.com/images/icon_product_pages/1749042852-icon-Tiktok.png"/>700</div><div class="price" data-usd="9.99">US$9.99</div></div>
      <div class="package" data-coins="1400"><div class="coin"><img src="https://cdn.unipin.com/images/icon_product_pages/1749042852-icon-Tiktok.png"/>1,400</div><div class="price" data-usd="19.99">US$19.99</div></div>
      <div class="package" data-coins="3500"><div class="coin"><img src="https://cdn.unipin.com/images/icon_product_pages/1749042852-icon-Tiktok.png"/>3,500</div><div class="price" data-usd="49.99">US$49.99</div></div>
      <!-- Row 3 -->
      <div class="package" data-coins="7500"><div class="coin"><img src="https://cdn.unipin.com/images/icon_product_pages/1749042852-icon-Tiktok.png"/>7,500</div><div class="price" data-usd="107.13">US$107.13</div></div>
      <div class="package" data-coins="17500"><div class="coin"><img src="https://cdn.unipin.com/images/icon_product_pages/1749042852-icon-Tiktok.png"/>17,500</div><div class="price" data-usd="249.99">US$249.99</div></div>
      <div class="package custom" id="customBtn"><div class="coin"><img src="https://cdn.unipin.com/images/icon_product_pages/1749042852-icon-Tiktok.png"/>Custom</div><div class="price">Enter amount</div></div>
    </div>

    <!-- Payment logos strip -->
    <div class="paystrip">
      <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg" alt="Visa">
      <img src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg" alt="Mastercard">
      <img src="https://www.paypalobjects.com/webstatic/icon/pp258.png" alt="PayPal">
      <img src="https://upload.wikimedia.org/wikipedia/commons/b/b0/Apple_Pay_logo.svg" alt="Apple Pay">
    </div>

    <button class="btn" id="payButton">Pay</button>
  </div>

  <!-- Payment Modal -->
  <div class="pm-modal" id="pmModal" style="display:none">
    <div class="pm-wrap">
      <div class="pm-header">
        <div class="pm-title">Payment method</div>
        <button class="pm-close" onclick="closePm()">×</button>
      </div>
      <div class="pm-list" id="pmList">
        <div class="pm-item active" data-method="visa"><div class="pm-left"><div class="pm-radio"></div><div class="pm-name">Visa / Mastercard</div></div><div class="pm-right"><img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg"><img src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg"></div></div>
        <div class="pm-item" data-method="paypal"><div class="pm-left"><div class="pm-radio"></div><div class="pm-name">PayPal</div></div><div class="pm-right"><img src="https://www.paypalobjects.com/webstatic/icon/pp258.png"></div></div>
        <div class="pm-item" data-method="applepay"><div class="pm-left"><div class="pm-radio"></div><div class="pm-name">Apple Pay</div></div><div class="pm-right"><img src="https://upload.wikimedia.org/wikipedia/commons/b/b0/Apple_Pay_logo.svg"></div></div>
      </div>
      <div class="pm-footer"><div class="pm-total" id="totalText">Total: US$0.00</div><button class="pm-pay" onclick="doPay()">Confirm</button></div>
    </div>
  </div>

  <!-- Loading & Success -->
  <div class="loading-modal" id="loadingModal" style="display:none"><div class="spinner"></div></div>
  <div class="final-modal" id="finalModal" style="display:none">
    <div class="final-card">
      <button class="final-close" onclick="closeFinal()">×</button>
      <div class="check"></div>
      <div class="final-title">Payment Successful</div>
      <div class="final-details" id="finalDetails">Your coins will be added to your account within 24h.</div>
    </div>
  </div>

  <!-- Quantity Sheet -->
  <div class="qty-sheet" id="qtySheet" style="display:none">
    <div class="qty-panel">
      <div class="qty-handle"></div>
      <div class="qty-title">Enter custom coins</div>
      <div class="qty-display"><span id="qtyValue">0</span> coins</div>
      <div class="qty-keypad">
        <div class="qty-key">1</div><div class="qty-key">2</div><div class="qty-key">3</div>
        <div class="qty-key">4</div><div class="qty-key">5</div><div class="qty-key">6</div>
        <div class="qty-key">7</div><div class="qty-key">8</div><div class="qty-key">9</div>
        <div class="qty-key gray" id="clear">C</div><div class="qty-key">0</div><div class="qty-key gray" id="back">⌫</div>
      </div>
      <div class="qty-row">
        <div class="qty-total">Total: <span id="qtyUsd">US$0.00</span></div>
        <div style="font-size:12px;color:#666">min 0 • max unlimited</div>
      </div>
      <div class="qty-paybar">
        <div class="qty-paybtn" id="qtyApply">Apply</div>
      </div>
    </div>
  </div>

<script>
  const perCoin = 0.0142842857;
  let selectedCoins = 0;
  let selectedUsd = 0;

  document.addEventListener('DOMContentLoaded', ()=>{
    document.getElementById('loadingModal').style.display='none';
    document.getElementById('finalModal').style.display='none';
    document.getElementById('pmModal').style.display='none';
    document.getElementById('qtySheet').style.display='none';
  });

  // package select
  document.querySelectorAll('.package').forEach(p=>{
    p.addEventListener('click',(ev)=>{
      if(p.id==='customBtn'){ ev.stopPropagation(); document.getElementById('customBtn').dispatchEvent(new Event('openCustom')); return; }
      document.querySelectorAll('.package').forEach(x=>x.classList.remove('selected'));
      p.classList.add('selected');
      selectedCoins = parseInt(p.getAttribute('data-coins'))||0;
      selectedUsd = parseFloat(p.querySelector('.price').getAttribute('data-usd'))||0;
      document.getElementById('totalText').innerText = 'Total: US$'+selectedUsd.toFixed(2);
    });
  });

  // Robust custom tile open
  const customBtn = document.getElementById('customBtn');
  const sheet = document.getElementById('qtySheet');
  customBtn.addEventListener('openCustom', ()=>{ sheet.style.display='block'; setTimeout(()=>{ sheet.classList.add('show'); }, 0); });
  customBtn.addEventListener('click', ()=>{ customBtn.dispatchEvent(new Event('openCustom')); });

  // Custom keypad
  const qtyValue = document.getElementById('qtyValue');
  const qtyUsd = document.getElementById('qtyUsd');
  function recalcPrice(){
    const coins = parseInt(qtyValue.textContent||'0')||0;
    const usd = coins * perCoin;
    qtyUsd.textContent = 'US$'+usd.toFixed(2);
  }
  document.querySelectorAll('.qty-key').forEach(k=>{
    k.onclick=()=>{
      if(k.id==='clear'){ qtyValue.textContent='0'; recalcPrice(); return; }
      if(k.id==='back'){ qtyValue.textContent = (qtyValue.textContent.length>1)?qtyValue.textContent.slice(0,-1):'0'; recalcPrice(); return; }
      const d = k.textContent.trim();
      qtyValue.textContent = (qtyValue.textContent==='0')? d : (qtyValue.textContent + d);
      recalcPrice();
    }
  });
  document.getElementById('qtyApply').onclick = ()=>{
    selectedCoins = parseInt(qtyValue.textContent||'0')||0;
    selectedUsd = selectedCoins * perCoin;
    document.getElementById('totalText').innerText = 'Total: US$'+selectedUsd.toFixed(2);
    sheet.classList.remove('show');
    setTimeout(()=>{ sheet.style.display='none'; }, 250);
    document.querySelectorAll('.package').forEach(x=>x.classList.remove('selected'));
    document.getElementById('customBtn').classList.add('selected');
  };
  sheet.addEventListener('click', (e)=>{ if(e.target===sheet){ sheet.classList.remove('show'); setTimeout(()=>{sheet.style.display='none';},250); } });

  // payment modal
  document.querySelectorAll('.pm-item').forEach(item=>{
    item.onclick=()=>{ document.querySelectorAll('.pm-item').forEach(i=>i.classList.remove('active')); item.classList.add('active'); };
  });
  document.getElementById('payButton').onclick = ()=>{ if(selectedCoins>0){ document.getElementById('pmModal').style.display='block'; } else alert('Please select a package'); };
  function closePm(){ document.getElementById('pmModal').style.display='none'; }

  // main pay flow (NO balance increase)
  function doPay(){
    closePm();
    const loading = document.getElementById('loadingModal');
    const finalM = document.getElementById('finalModal');
    finalM.style.display='none';
    loading.style.display='flex';
    setTimeout(()=>{
      loading.style.display='none';
      const details = document.getElementById('finalDetails');
      details.innerHTML = 'You purchased <b>'+selectedCoins.toLocaleString()+' coins</b><br>Amount: <b>US$'+selectedUsd.toFixed(2)+'</b><br>Your coins will be added to your account within 24h.';
      finalM.style.display='flex';
      // NOTE: do not alter balance per user's request
      setTimeout(()=>{ closeFinal(); }, 5000);
    }, 3000);
  }
  function closeFinal(){ document.getElementById('finalModal').style.display='none'; }
</script>
</body>
</html>
